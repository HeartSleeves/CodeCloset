(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{76:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),a=n(64),s=n.n(a),r=(n(76),n(9)),d=n(16),l=n(5),j=n(67),o=n(92),p=n(94),b=n(91),O=n(65),h=n(1);var u=function(){return Object(h.jsx)("footer",{children:Object(h.jsxs)("p",{id:"networklinks",children:["Find Ivy at ",Object(h.jsx)("a",{href:"https://github.com/Love-Ivy",children:"Github"})," and"," ",Object(h.jsx)("a",{href:"https://www.linkedin.com/in/ivylovegood/",children:"LinkedIn"}),". Find Adeline at ",Object(h.jsx)("a",{href:"https://github.com/adelineagus",children:"Github"})]})})};var m,x,v,g,f=function(e){var t=e.title,n=e._id,c=e.desc,i=e.text,a=e.author,s=e.date;return Object(h.jsxs)("article",{className:"card",children:[Object(h.jsxs)("div",{className:"cardheader",children:[Object(h.jsx)(d.b,{to:"/snippets/".concat(n),children:Object(h.jsx)("h4",{className:"cardtitle",children:t})}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("p",{className:"carduser",children:["Created by: ",a]}),Object(h.jsx)("p",{className:"carddate",children:s})]})]}),Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:"carddesc",children:c})}),Object(h.jsx)("div",{children:Object(h.jsx)("code",{className:"cardsnippet",children:i})})]})},T=n(96),N=n(25),w=n(93),y=Object(w.a)(m||(m=Object(N.a)(["\n  {\n    snippets {\n      _id\n      snippetTitle\n      snippetDescription\n      snippetText\n      snippetAuthor\n      createdAt\n    }\n  }\n"]))),A=Object(w.a)(x||(x=Object(N.a)(["\n  query getSingleSnippet($snippetId: ID!) {\n    snippet(snippetId: $snippetId) {\n      _id\n      snippetTitle\n      snippetDescription\n      snippetText\n      snippetAuthor\n      createdAt\n      comments {\n        _id\n        commentText\n        commentAuthor\n        createdAt\n      }\n    }\n  }\n"]))),_=Object(w.a)(v||(v=Object(N.a)(["\n  {\n    user {\n      _id\n      email\n      snippets {\n        _id\n        snippetTitle\n        snippetDescription\n        snippetText\n        snippetAuthor\n        createdAt\n      }\n    }\n  }\n"]))),S=Object(w.a)(g||(g=Object(N.a)(["\n  query me {\n    me {\n      _id\n      email\n      snippets {\n        _id\n        snippetTitle\n        snippetDescription\n        snippetText\n        snippetAuthor\n        createdAt\n      }\n    }\n  }\n"]))),C=n.p+"static/media/spinner.7e729fec.gif";var k=function(){var e=Object(T.a)(y),t=e.loading,n=e.data,c=(null===n||void 0===n?void 0:n.snippets)||[];return Object(h.jsxs)("section",{id:"searchresults",className:"carddisplay",children:[c.length?Object(h.jsx)("div",{children:c.map((function(e){return Object(h.jsx)(f,{_id:e._id,title:e.snippetTitle,desc:e.snippetDescription,text:e.snippetText,author:e.snippetAuthor,date:e.createdAt},e._id)}))}):Object(h.jsx)("h3",{children:"You haven't added any snippets yet!"}),t?Object(h.jsx)("img",{src:C,alt:"loading"}):null]})},D=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:Object(h.jsx)("h3",{id:"searchparams",className:"title",children:"All Snippets"})}),Object(h.jsx)(k,{}),Object(h.jsxs)("footer",{children:[Object(h.jsx)("h5",{children:"Created by: Ivy Lovegood and Adeline Aguspranoto"}),Object(h.jsx)(u,{})]})]})},I=n(29),E=n(28),$=n(55),P=n.n($),R=new(function(){function e(){Object(I.a)(this,e)}return Object(E.a)(e,[{key:"getProfile",value:function(){return P()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){try{return P()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}());var F,L,U,G,Y=function(){return Object(h.jsxs)("header",{children:[Object(h.jsx)("h1",{id:"apptitle",className:"title",children:Object(h.jsx)(d.b,{to:"/",children:"Code Closet"})}),Object(h.jsxs)("nav",{id:"navbar",children:[R.loggedIn()?Object(h.jsxs)("div",{id:"navbar",children:[Object(h.jsx)("h2",{className:"navbtn",id:"profile",children:Object(h.jsx)(d.b,{to:"/profile",children:"Profile"})}),Object(h.jsx)("h2",{className:"navbtn",id:"logout",children:Object(h.jsx)("a",{href:"/",onClick:function(){return R.logout()},children:"Logout"})})]}):Object(h.jsxs)("div",{id:"navbar",children:[Object(h.jsx)("h2",{className:"navbtn",id:"signup",children:Object(h.jsx)(d.b,{to:"/signup",children:"Signup"})}),Object(h.jsx)("h2",{className:"navbtn",id:"login",children:Object(h.jsx)(d.b,{to:"/login",children:"Login"})})]}),Object(h.jsxs)("div",{id:"search",children:[Object(h.jsx)("label",{htmlFor:"searchbar",children:"Search"}),Object(h.jsx)("input",{type:"search",className:"searchbar",id:"searchbar",name:"searchbar"})]}),R.loggedIn()?Object(h.jsx)("button",{id:"newsnippetbtn",children:Object(h.jsx)(d.b,{to:"/createsnippet",children:"Create New Snippet"})}):""]})]})},M=function(e){e.snippet;var t=Object(l.o)().email,n=Object(T.a)(t?_:S,{variables:{email:t}}),c=n.loading,i=n.data,a=(null===i||void 0===i?void 0:i.me)||(null===i||void 0===i?void 0:i.email)||{};if(R.loggedIn()&&R.getProfile().data.email===t)return Object(h.jsx)(l.a,{to:"/me"});var s=R.getProfile().data.email;return c?Object(h.jsx)("div",{children:"Loading..."}):null!==a&&void 0!==a&&a.email?Object(h.jsxs)("div",{children:[Object(h.jsx)("section",{className:"profileheader",children:Object(h.jsxs)("h2",{children:["Welcome ",s,"!"]})}),Object(h.jsxs)("section",{id:"searchresults",className:"carddisplay",children:[a.snippets.length?Object(h.jsxs)("div",{children:[Object(h.jsxs)("h2",{children:["You've made ",a.snippets.length," Posts:"]}),a.snippets.map((function(e){return Object(h.jsx)(f,{_id:e._id,title:e.snippetTitle,desc:e.snippetDescription,text:e.snippetText,author:e.snippetAuthor,date:e.createdAt},e._id)}))]}):Object(h.jsx)(d.b,{to:"/createsnippet",children:Object(h.jsx)("h2",{children:"Create your first Snippet!"})}),c?Object(h.jsx)("img",{src:C,alt:"loading"}):null]})]}):Object(h.jsx)("h3",{children:"You must be logged in!"})},W=n(12),q=n(7),Q=n(14),B=n(8),J=n(89),z=Object(w.a)(F||(F=Object(N.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"]))),V=Object(w.a)(L||(L=Object(N.a)(["\n  mutation addSnippet($snippetTitle: String!, $snippetDescription: String!, $snippetText: String!) {\n    addSnippet(snippetTitle: $snippetTitle, snippetDescription: $snippetDescription, snippetText: $snippetText) {\n      _id\n      snippetAuthor\n      createdAt\n      snippetTitle\n      snippetDescription\n      snippetText\n      comments {\n        _id\n      }\n    }\n  }\n"]))),H=Object(w.a)(U||(U=Object(N.a)(["\n  mutation addComment($snippetId: ID!, $commentText: String!) {\n    addComment(snippetId: $snippetId, commentText: $commentText) {\n      _id\n      snippetAuthor\n      createdAt\n      snippetTitle\n      snippetDescription\n      snippetText\n      comments {\n        _id\n        commentText\n        createdAt\n      }\n    }\n  }\n"]))),K=Object(w.a)(G||(G=Object(N.a)(["\n  mutation addUser(\n    $email: String!\n    $password: String!\n  ) {\n    addUser(\n      email: $email\n      password: $password\n    ) {\n      token\n      user {\n        _id\n      }\n    }\n  }\n"])));var X=function(e){var t=Object(c.useState)({email:"",password:""}),n=Object(B.a)(t,2),i=n[0],a=n[1],s=Object(J.a)(z),l=Object(B.a)(s,2),j=l[0],o=l[1].error,p=function(){var e=Object(Q.a)(Object(q.a)().mark((function e(t){var n,c;return Object(q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,j({variables:{email:i.email,password:i.password}});case 4:n=e.sent,c=n.data.login.token,R.login(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.target,n=t.name,c=t.value;a(Object(r.a)(Object(r.a)({},i),{},Object(W.a)({},n,c)))};return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:p,className:"bigcard login-form",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h2",{className:"cardheader",children:"Login"})}),Object(h.jsxs)("div",{className:"cardinput",children:[Object(h.jsxs)("div",{className:"inputdiv",children:[Object(h.jsx)("label",{htmlFor:"username",children:"Email"}),Object(h.jsx)("input",{id:"user-login",name:"email",type:"email",placeholder:"Email",onChange:b})]}),Object(h.jsxs)("div",{className:"inputdiv",children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)("input",{id:"password-login",name:"password",type:"password",placeholder:"Password",onChange:b})]}),o?Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:"error-text",children:"The provided credentials are incorrect"})}):null,Object(h.jsx)("button",{type:"submit",id:"submitbtn",children:"Login"})]}),Object(h.jsx)("div",{className:"commentdata",children:Object(h.jsx)(d.b,{to:"/signup",children:"Signup instead?"})})]})})};var Z=function(){var e=Object(c.useState)({email:"",password:""}),t=Object(B.a)(e,2),n=t[0],i=t[1],a=Object(J.a)(K),s=Object(B.a)(a,1)[0],l=function(){var e=Object(Q.a)(Object(q.a)().mark((function e(t){var c,i;return Object(q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,s({variables:Object(r.a)({},n)});case 3:c=e.sent,i=c.data.addUser.token,R.login(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){var t=e.target,c=t.name,a=t.value;i(Object(r.a)(Object(r.a)({},n),{},Object(W.a)({},c,a)))};return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onSubmit:l,className:"bigcard login-form",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h2",{className:"cardheader",children:"Signup"})}),Object(h.jsxs)("div",{className:"cardinput",children:[Object(h.jsxs)("div",{className:"inputdiv",children:[Object(h.jsx)("label",{htmlFor:"username",children:"Email"}),Object(h.jsx)("input",{id:"user-login",type:"email",name:"email",placeholder:"Email",onChange:j})]}),Object(h.jsxs)("div",{className:"inputdiv",children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)("input",{id:"password-login",type:"password",name:"password",placeholder:"Password",onChange:j})]}),Object(h.jsx)("button",{type:"submit",id:"submitbtn",children:"Signup"})]}),Object(h.jsx)("div",{className:"commentdata",children:Object(h.jsx)(d.b,{to:"/login",children:"Login instead?"})})]})})},ee=function(e){var t=e.comments,n=void 0===t?[]:t;return n.length?Object(h.jsx)("section",{className:"comments",children:Object(h.jsx)("div",{className:"commentcard",children:n&&n.map((function(e){return Object(h.jsxs)("div",{className:"commentcard",children:[Object(h.jsx)("div",{className:"commenthead"}),Object(h.jsxs)("div",{className:"comment",children:[Object(h.jsx)("p",{className:"commentcontent",children:e.commentText}),Object(h.jsxs)("p",{className:"commentdata",children:["- ",e.commentAuthor]}),Object(h.jsx)("p",{children:e.createdAt})]})]},e._id)}))})}):Object(h.jsx)("h3",{children:"No Comments Yet"})},te=function(e){var t=e.snippetId,n=Object(c.useState)({commentText:""}),i=Object(B.a)(n,2),a=i[0],s=i[1],l=Object(J.a)(H),j=Object(B.a)(l,2),o=j[0];j[1].error;if(R.loggedIn()){var p=function(){var e=Object(Q.a)(Object(q.a)().mark((function e(n){var c;return Object(q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault();try{c=o({variables:{snippetId:t,commentText:a.commentText,commentAuthor:R.getProfile().data.email}}),c.data}catch(i){console.error(i)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("form",{onSubmit:p,className:"bigcard hidden",id:"addcomment",children:Object(h.jsx)("div",{className:"cardinput",children:Object(h.jsxs)("div",{className:"inputdiv",children:[Object(h.jsxs)("div",{className:"inputdiv",children:[Object(h.jsx)("label",{htmlFor:"commentText",children:"Comment"}),Object(h.jsx)("textarea",{id:"bodyinput",name:"commentText",value:a.commentText,placeholder:"What would you like to say?",onChange:function(e){var t=e.target,n=t.name,c=t.value;s(Object(r.a)(Object(r.a)({},a),{},Object(W.a)({},n,c)))}})]}),Object(h.jsx)("button",{type:"submit",id:"submitbtn",children:"Add Comment"})]})})})}return Object(h.jsx)("p",{className:"loginswitch",children:Object(h.jsx)(d.b,{to:"/login",children:"Login to comment"})})},ne=function(){var e=Object(l.o)().snippetId,t=Object(T.a)(A,{variables:{snippetId:e}}),n=(t.loading,t.data),c=(null===n||void 0===n?void 0:n.snippet)||{};return console.log(c),Object(h.jsxs)("div",{children:[Object(h.jsxs)("article",{className:"card",children:[Object(h.jsxs)("div",{className:"cardheader",children:[Object(h.jsx)("h4",{className:"cardtitle",children:c.snippetTitle}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("p",{className:"carduser",children:["Created by: ",c.snippetAuthor]}),Object(h.jsx)("p",{className:"carddate",children:c.createdAt})]})]}),Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:"carddesc",children:c.snippetDescription})}),Object(h.jsx)("div",{children:Object(h.jsx)("code",{className:"cardsnippet",children:c.snippetText})})]}),Object(h.jsx)(ee,{comments:c.comments}),Object(h.jsx)(te,{snippetId:c._id})]})};var ce=function(e){var t=e.children;return Object(h.jsx)("div",{style:{height:560,clear:"both",paddingTop:120,textAlign:"center"},children:t})},ie=function(){return Object(h.jsx)("div",{children:Object(h.jsxs)(ce,{children:[Object(h.jsx)("h1",{children:"404 Page Not Found"}),Object(h.jsx)("h1",{children:Object(h.jsx)("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji",children:"\ud83d\ude44"})})]})})},ae=n(68),se=n(18),re=function(e,t){switch(t.type){case"UPDATE_SNIPPET":return Object(r.a)(Object(r.a)({},e),{},{products:Object(se.a)(t.products)});case"ADD_TO_CART":return Object(r.a)(Object(r.a)({},e),{},{cartOpen:!0,cart:[].concat(Object(se.a)(e.cart),[t.product])});case"ADD_MULTIPLE_TO_CART":return Object(r.a)(Object(r.a)({},e),{},{cart:[].concat(Object(se.a)(e.cart),Object(se.a)(t.products))});case"UPDATE_CART_QUANTITY":return Object(r.a)(Object(r.a)({},e),{},{cartOpen:!0,cart:e.cart.map((function(e){return t._id===e._id&&(e.purchaseQuantity=t.purchaseQuantity),e}))});case"REMOVE_FROM_CART":var n=e.cart.filter((function(e){return e._id!==t._id}));return Object(r.a)(Object(r.a)({},e),{},{cartOpen:n.length>0,cart:n});case"CLEAR_CART":return Object(r.a)(Object(r.a)({},e),{},{cartOpen:!1,cart:[]});case"TOGGLE_CART":return Object(r.a)(Object(r.a)({},e),{},{cartOpen:!e.cartOpen});case"UPDATE_CATEGORIES":return Object(r.a)(Object(r.a)({},e),{},{categories:Object(se.a)(t.categories)});case"UPDATE_CURRENT_CATEGORY":return Object(r.a)(Object(r.a)({},e),{},{currentCategory:t.currentCategory});default:return e}};var de=["value"],le=Object(c.createContext)(),je=le.Provider,oe=function(e){e.value;var t,n=Object(ae.a)(e,de),i=(t={products:[],cart:[],cartOpen:!1,categories:[],currentCategory:""},Object(c.useReducer)(re,t)),a=Object(B.a)(i,2),s=a[0],d=a[1];return Object(h.jsx)(je,Object(r.a)({value:[s,d]},n))},pe=function(){var e=Object(c.useState)({snippetTitle:"",snippetDescription:"",snippetText:""}),t=Object(B.a)(e,2),n=t[0],i=t[1],a=Object(J.a)(V),s=Object(B.a)(a,2),d=s[0],l=(s[1].error,function(){var e=Object(Q.a)(Object(q.a)().mark((function e(t){var c;return Object(q.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{c=d({variables:Object(r.a)({},n)}),c.data}catch(i){console.error(i)}window.location.assign("/profile");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),j=function(e){var t=e.target,c=t.name,a=t.value;i(Object(r.a)(Object(r.a)({},n),{},Object(W.a)({},c,a)))};return Object(h.jsxs)("form",{onSubmit:l,className:"bigcard",id:"newsnippet",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h2",{className:"cardheader",children:"New Snippet"})}),Object(h.jsxs)("div",{className:"cardinput",children:[Object(h.jsxs)("div",{className:"inputdiv",children:[Object(h.jsx)("label",{htmlFor:"snippetTitle",children:"Title"}),Object(h.jsx)("input",{id:"titleinput",type:"text",name:"snippetTitle",value:n.snippetTitle,placeholder:"Title",onChange:j})]}),Object(h.jsxs)("div",{className:"inputdiv",children:[Object(h.jsx)("label",{htmlFor:"snippetDescription",children:"Description"}),Object(h.jsx)("textarea",{id:"descinput",name:"snippetDescription",value:n.snippetDescription,placeholder:"What does it do?",onChange:j})]}),Object(h.jsxs)("div",{className:"inputdiv",children:[Object(h.jsx)("label",{htmlFor:"snippetText",children:"Content"}),Object(h.jsx)("textarea",{id:"bodyinput",name:"snippetText",value:n.snippetText,placeholder:"insert code here",onChange:j})]}),Object(h.jsx)("button",{type:"submit",id:"submitbtn",children:"Submit"})]})]})},be=Object(j.a)({uri:"/graphql"}),Oe=Object(O.a)((function(e,t){var n=t.headers,c=localStorage.getItem("id_token");return{headers:Object(r.a)(Object(r.a)({},n),{},{authorization:c?"Bearer ".concat(c):""})}})),he=new o.a({link:Oe.concat(be),cache:new p.a});var ue=function(){return Object(h.jsx)(b.a,{client:he,children:Object(h.jsx)(d.a,{children:Object(h.jsx)("div",{children:Object(h.jsxs)(oe,{children:[Object(h.jsx)(Y,{}),Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{path:"/",element:Object(h.jsx)(D,{})}),Object(h.jsx)(l.b,{path:"/profile",element:Object(h.jsx)(M,{})}),Object(h.jsx)(l.b,{path:"/login",element:Object(h.jsx)(X,{})}),Object(h.jsx)(l.b,{path:"/signup",element:Object(h.jsx)(Z,{})}),Object(h.jsx)(l.b,{path:"/createsnippet",element:Object(h.jsx)(pe,{})}),Object(h.jsx)(l.b,{path:"/contact",element:Object(h.jsx)(u,{})}),Object(h.jsx)(l.b,{path:"/snippets/:snippetId",element:Object(h.jsx)(ne,{})}),Object(h.jsx)(l.b,{path:"*",element:Object(h.jsx)(ie,{})})]})]})})})})};s.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(ue,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.20b844f4.chunk.js.map